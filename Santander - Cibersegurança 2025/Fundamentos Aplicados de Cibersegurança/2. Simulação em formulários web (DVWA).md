# 1. Identificando o alvo na rede

O primeiro passo foi realizar a identificação do alvo na rede, para isso eu precisei realizar um scan utilizando a ferramenta nmap por via de comando no terminal do Kali Linux

```shell
┌──(bazukart㉿kali)-[~]
└─$ sudo nmap -sn -PS -PA 192.168.1.0/24
Starting Nmap 7.95 ( https://nmap.org ) at 2025-11-28 01:06 -03
Nmap scan report for 192.168.1.1
Host is up (0.031s latency).
MAC Address: 00:EB:D8:63:C1:A8 (Mercusys Technologies)
Nmap scan report for 192.168.1.101
Host is up (0.00034s latency).
MAC Address: 08:00:27:E6:DC:6D (PCS Systemtechnik/Oracle VirtualBox virtual NIC)
Nmap scan report for 192.168.1.110
Host is up.
MAC Address: FC:23:CD:4B:FF:4C (Unknown)
Nmap scan report for 192.168.1.119
Host is up (0.00019s latency).
MAC Address: A8:E2:91:86:A5:59 (Unknown)
Nmap scan report for 192.168.1.100
Host is up.
Nmap done: 256 IP addresses (5 hosts up) scanned in 3.71 seconds
```

Aqui é possível identificar que o host `192.168.1.101` é o nosso alvo principal, por estar identificado como um equipamento vinculado ao VirtualBox

# 2. Identificando o serviço HTTP

Depois de ter descoberto o host na rede, ainda utilizarei o nmap para descobrir se o serviço `HTTP` (Porta 80) está disponível no alvo que desejo atacar

```shell
┌──(bazukart㉿kali)-[~]
└─$ sudo nmap -sV -p 80 192.168.1.101 
Starting Nmap 7.95 ( https://nmap.org ) at 2025-11-28 01:11 -03
Nmap scan report for 192.168.1.101
Host is up (0.00050s latency).

PORT   STATE SERVICE VERSION
80/tcp open  http     Apache httpd 2.2.8 ((Ubuntu) DAV/2)
MAC Address: 08:00:27:E6:DC:6D (PCS Systemtechnik/Oracle VirtualBox virtual NIC)
Service Info: OS: Unix

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 0.58 seconds

```

Aqui é possível visualizar que o serviço `HTTP` está aberto (open), oque indica que ele está pronto para receber conexões

# 3. Explorando o cabeçalho HTTP

Nesta etapa, eu realizo um teste de conexão na pagina web `HTTP` para verificar os cabeçalhos da pagina copiando e colando o texto "http://192.168.1.101/dvwa/login.php" no navegador do Kali Linux, tendo o metasploitable com o ip correspondente ao link inserido.

## 3.1. Inserindo informações no cabeçalho

Após abrir a aplicação web no navegador, foi inserido uma informação qualquer nos campos correspondentes da pagina web (Username & Password) apenas para visualizar o comportamento do navegador

### 3.2. Abrindo aba de "Inspecionar"

Abrindo a opção de "inspecionar" na pagina web, e navegando em "Network" é possível ver como o navegador se comporta ao realizar uma tentativa de login na pagina web que está sendo hospedada pelo metasploitable.

> As informações que podem ser visualizadas são correspondentes aos métodos GET e POST
> E justamente ao método POST é possível ver oque foi inserido no cabeçalho de login do navegador

# 4. Preparando o ataque

 Semelhante á simulação de ataque de força bruta realizada em um servidor `FTP`. O `HTTP` também exige parâmetros de login e senha, é necessário criar-se 2 listas separadas para colocar possíveis combinações a serem testadas pela ferramenta medusa no momento do ataque

Para isso, também separei 2 arquivos `.txt` com algumas credenciais de possíveis nomes e senhas que possuem a tendencia de usuários leigos estarem utilizando em seus sistemas.

## 4.1. `users.txt`

1. user
2. msfadmin
3. admin
4. root
## 4.2. `senhas.txt`

1. 123456
2. password
3. qwerty
4. msfadmin
5. admin

# 5. Iniciando o ataque

Durante a realização do ataque, foi utilizado o seguinte comando para tentar realizar um ataque de força bruta na aplicação DVWA hospedada no Metasploitable:


```shell
medusa -h 192.168.1.102 -U users2.txt -P senhas2.txt -M http \
-m PAGE:'http://192.168.1.102/dvwa/login.php' \
-m FORM:'username=^USER^&password=^PASS^&Login=Login' \
-m FAIL:'Login failed' -t 6
```

### Análise do procedimento

O comando acima está **corretamente estruturado** para atacar formulários HTTP simples, onde:

- O formulário possui apenas campos estáticos,
- Não utiliza cookies obrigatórios,
- E não contém mecanismos de proteção como tokens de sessão.

No entanto, ele está **tecnicamente incorreto para o DVWA**, por motivos fundamentais.

### Por que o ataque não funciona no DVWA

O DVWA implementa mecanismos básicos de proteção que **impedem esse tipo de ataque simples**:

### 1. Token CSRF dinâmico (`user_token`)

O DVWA exige que cada requisição POST de login inclua um token único que muda a cada carregamento da página.

Ferramentas como o Medusa **não conseguem atualizar esse token automaticamente**, o que torna o ataque inviável.

### 2. Cookies de sessão obrigatórios

Ao acessar a página de login, o servidor envia um cookie `PHPSESSID`.  
Este cookie deve ser reenviado no POST de autenticação.

O Medusa **não manipula cookies nesse módulo**, resultando em falhas garantidas.

### Conclusões

Conclui-se que, nem todos os formulários são tão simples quanto parece, esse formulário colocado em teste, foi identificado que possui um dos mecanismos de proteção que incluem tokens e cookies protegendo-se de Falsificação de Solicitação entre Sites (Cross-Site Request Forgery - CSRF)